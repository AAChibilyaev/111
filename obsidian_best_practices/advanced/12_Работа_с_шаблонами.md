# 12. Продвинутые техники работы с шаблонами

## 1. Динамические переменные (официальная документация)
```javascript
<%*
tR += `# ${tp.date.now("dddd, DD MMMM YYYY")}\n\n`;
tR += `## Приоритеты на ${tp.date.now("dddd")}\n\n`;
%>
```
- Автоматическое обновление дат
- Поддержка локализации
- Форматирование через moment.js

## 2. Условная логика в шаблонах
```javascript
<%*
const projects = tp.file.find_tfiles("Project*");
if (projects.length > 0) {
  tR += "## Текущие проекты\n";
  projects.forEach(p => tR += `- [[${p.basename}]]\n`);
}
%>
```
- Проверка существования файлов
- Динамическое генерирование контента
- Автоматические ссылки

## 3. Интеграция с Frontmatter
```yaml
<%*
tp.frontmatter["tags"] = ["важно", tp.date.now("YYYY-MM")];
tp.frontmatter["status"] = "черновик";
%>
```
- Автозаполнение метаданных
- Динамические теги по дате
- Статус системы

## 4. Безопасные шаблоны
```javascript
<%*
// Проверка обязательных параметров
if (!tp.config.run_mode) {
  tR += "⚠️ Шаблон требует Templater v1.8+";
  return;
}
%>
```
- Защита от ошибок
- Проверка версий
- Грамотная обработка исключений

## 5. Мультиплатформенные шаблоны
```javascript
<%*
const templatePath = tp.file.is_mobile ? 
  "Mobile/Templates/Daily" : 
  "Templates/Daily";
tR += await tp.file.include(`[[${templatePath}]]`);
%>
```
- Автодетекция платформы
- Разные шаблоны для устройств
- Единая точка управления

*Источник: Официальная документация Templater plugin v1.8.2*

## Связанные руководства
[[00_Оглавление]] | [[12_Работа_с_шаблонами]]
